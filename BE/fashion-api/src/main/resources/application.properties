# ========================================
# APPLICATION CONFIGURATION
# ========================================
spring.application.name=fashion-api

# ========================================
# SERVER CONFIGURATION
# ========================================
server.port=${SERVER_PORT:8080}
server.servlet.context-path=${SERVER_CONTEXT_PATH:}
server.compression.enabled=${SERVER_COMPRESSION_ENABLED:true}
server.compression.mime-types=${SERVER_COMPRESSION_MIME_TYPES:text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json}
server.http2.enabled=${SERVER_HTTP2_ENABLED:true}
server.error.include-message=always
server.error.include-binding-errors=always

# ========================================
# DATABASE CONFIGURATION
# ========================================
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/tlcn_demo?useSSL=false&serverTimezone=Asia/Ho_Chi_Minh&allowPublicKeyRetrieval=true&characterEncoding=UTF-8}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.hikari.maximum-pool-size=${DB_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${DB_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT:600000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME:1800000}

# ========================================
# JPA / HIBERNATE CONFIGURATION
# ========================================
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=${HIBERNATE_FORMAT_SQL:true}
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.open-in-view=false

# ========================================
# FILE UPLOAD CONFIGURATION
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=2MB

# ========================================
# REDIS CONFIGURATION
# ========================================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl=${REDIS_SSL:false}
spring.data.redis.timeout=60000
spring.cache.type=redis
spring.cache.redis.time-to-live=${CACHE_TTL:60000}

# ========================================
# MAIL CONFIGURATION
# ========================================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:huynngoc77@gmail.com}
spring.mail.password=${MAIL_PASSWORD:ipvz soqz esog ucij}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
app.mail.from=${EMAIL_FROM:UTESHOP <noreply@uteshop.com>}
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# ========================================
# THYMELEAF CONFIGURATION (Email Templates)
# ========================================
spring.thymeleaf.cache=${THYMELEAF_CACHE:false}
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8

# ========================================
# JACKSON CONFIGURATION
# ========================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jackson.default-property-inclusion=non_null

# ========================================
# JWT CONFIGURATION
# ========================================
jwt.secret=${JWT_SECRET:fashion-api-super-secret-key-for-jwt-hs512-algorithm-min-512-bits}
# Access token: 7 ngày (604800000 ms = 7 * 24 * 60 * 60 * 1000)
jwt.access-token-expiration=${JWT_ACCESS_TOKEN_TTL:604800000}
# Refresh token: 90 ngày (7776000000 ms = 90 * 24 * 60 * 60 * 1000)
jwt.refresh-token-expiration=${JWT_REFRESH_TOKEN_TTL:7776000000}

# ========================================
# CORS CONFIGURATION
# ========================================
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173,http://localhost:5174,http://localhost:4200}
app.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
app.cors.allowed-headers=*
app.cors.allow-credentials=true


# ========================================
# STORAGE CONFIGURATION (Cloudinary)
# ========================================
app.storage.type=${STORAGE_TYPE:cloudinary}
app.storage.upload-dir=${LOCAL_UPLOAD_DIR:uploads/}
#app.storage.cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME:}
#app.storage.cloudinary.api-key=${CLOUDINARY_API_KEY:}
#app.storage.cloudinary.api-secret=${CLOUDINARY_API_SECRET:}
#app.storage.cloudinary.folder=${CLOUDINARY_FOLDER:fashion-products}

# ========================================
# PAYMENT CONFIGURATION
# ========================================
# VNPay
# app.payment.vnpay.url=${VNPAY_URL:https://sandbox.vnpayment.vn/paymentv2/vpcpay.html}
# app.payment.vnpay.tmn-code=${VNPAY_TMN_CODE:SANDBOX_TMN_CODE}
# app.payment.vnpay.hash-secret=${VNPAY_HASH_SECRET:SANDBOX_HASH_SECRET}
# app.payment.vnpay.return-url=${VNPAY_RETURN_URL:http://localhost:3000/payment/vnpay/callback}
# app.payment.vnpay.api-url=${VNPAY_API_URL:https://sandbox.vnpayment.vn/merchant_webapi/api/transaction}

# PayOS
app.payment.payos.client-id=${PAYOS_CLIENT_ID:}
app.payment.payos.api-key=${PAYOS_API_KEY:}
app.payment.payos.checksum-key=${PAYOS_CHECKSUM_KEY:}
app.payment.payos.partner-code=${PAYOS_PARTNER_CODE:}
app.payment.payos.return-url=${PAYOS_RETURN_URL:http://localhost:3000/payment/payos/callback}
app.payment.payos.cancel-url=${PAYOS_CANCEL_URL:http://localhost:3000/payment/payos/cancel}

# ========================================
# SWAGGER/OPENAPI CONFIGURATION
# ========================================
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.disable-swagger-default-url=true

# ========================================
# LOGGING CONFIGURATION
# ========================================
logging.level.root=${LOGGING_LEVEL_ROOT:INFO}
logging.level.com.tlcn.fashion_api=${LOGGING_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOGGING_LEVEL_WEB:DEBUG}
logging.level.org.springframework.security=${LOGGING_LEVEL_SECURITY:DEBUG}
logging.level.org.hibernate.SQL=${LOGGING_LEVEL_HIBERNATE_SQL:DEBUG}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=${LOGGING_LEVEL_HIBERNATE_BINDER:TRACE}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=${LOGGING_FILE:}
logging.file.max-size=${LOGGING_FILE_MAX_SIZE:10MB}
logging.file.max-history=${LOGGING_FILE_MAX_HISTORY:30}

# ========================================
# ASYNC CONFIGURATION
# ========================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100
spring.task.execution.thread-name-prefix=async-

# ========================================
# SCHEDULER CONFIGURATION
# ========================================
spring.task.scheduling.pool.size=5
spring.task.scheduling.thread-name-prefix=scheduling-

# ========================================
# DEVTOOLS (Safe defaults for local; disable via env in production)
# ========================================
spring.devtools.restart.enabled=${DEVTOOLS_RESTART_ENABLED:true}
spring.devtools.livereload.enabled=${DEVTOOLS_LIVERELOAD_ENABLED:true}

# ========================================
# ACTUATOR / METRICS
# ========================================
management.endpoints.web.exposure.include=${MANAGEMENT_ENDPOINTS:health,info,metrics}
management.endpoint.health.show-details=${MANAGEMENT_HEALTH_DETAILS:when-authorized}
management.metrics.export.prometheus.enabled=${PROMETHEUS_ENABLED:true}

# ========================================
# INTERNATIONALIZATION
# ========================================
spring.messages.basename=messages
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=false

# ========================================
# USER & INVITATION CONFIGURATION
# ========================================
# Invitation settings (for staff/employee invite)
app.invitation.token-expiration=${INVITATION_TOKEN_TTL:86400000}
app.invitation.max-resend=${INVITATION_MAX_RESEND:3}
app.invitation.base-url=${INVITATION_BASE_URL:http://localhost:3000/accept-invitation}

# Verification settings (for customer email/phone verification)
app.verification.code-length=${VERIFICATION_CODE_LENGTH:6}
app.verification.code-expiration=${VERIFICATION_CODE_TTL:600000}
app.verification.max-attempts=${VERIFICATION_MAX_ATTEMPTS:5}
app.verification.email-base-url=${VERIFICATION_EMAIL_BASE_URL:http://localhost:3000/verify-email}

# Password reset settings
app.password-reset.token-expiration=${PASSWORD_RESET_TOKEN_TTL:3600000}
app.password-reset.base-url=${PASSWORD_RESET_BASE_URL:http://localhost:3000/reset-password}

# Account security settings
app.security.max-failed-login-attempts=${MAX_FAILED_LOGIN_ATTEMPTS:5}
app.security.account-lock-duration=${ACCOUNT_LOCK_DURATION:1800000}
app.security.password-expiry-days=${PASSWORD_EXPIRY_DAYS:90}

# Email settings for user module
app.email.invitation-template=invitation-email
app.email.verification-template=verification-email
app.email.password-reset-template=password-reset-email
app.email.welcome-template=welcome-email
app.email.from-name=${EMAIL_FROM_NAME:Fashion Shop}
app.email.from-address=${EMAIL_FROM_ADDRESS:noreply@fashionshop.com}
app.email.support-email=${EMAIL_SUPPORT:support@fashionshop.com}


# PayOS direct config cho PayOSConfig(prefix="payos")
payos.client-id=49802f00-eb0b-46ee-89be-2ee0b1b511c5
payos.api-key=35e34d08-f254-41e8-870b-c62a516aeb34
payos.checksum-key=46332b90287383025aa8639351899c8a253e8656c8b31ca34f1bb38f617e96b1
payos.return-url=http://localhost:3000/payment/payos/callback
payos.cancel-url=http://localhost:3000/payment/payos/cancel

# ========================================
# SEPAY CONFIGURATION
# ========================================

# API Token cua SePay (bat buoc)
sepay.api-token=EVDAS54WHTWBBHXVCQL92EQGMWBACPTYDOYJU1FT4GFURHIOQTUKAS6LV30ZHUXS

# So tai khoan MB da lien ket trong SePay (bat buoc)
sepay.bank-account-number=807541616

# (Tuy chon) URL API neu ban muon override o muc mac dinh SepayClient dung cai nay
sepay.base-url=https://my.sepay.vn


# ========================================
# CLOUDINARY CONFIGURATION (NEW)
# ========================================
app.storage.cloudinary.cloud-name=dn4l1otfz
app.storage.cloudinary.api-key=473799745296454
app.storage.cloudinary.api-secret=PlNyuFd5Dk0qn53vCcFdW7nqyo0
app.storage.cloudinary.folder=fashion-products
app.storage.cloudinary.upload-preset=my_preset

# ========================================
# VIRTUAL TRY-ON (Replicate)
# ========================================
replicate.api.token=${REPLICATE_API_TOKEN:r8_3yvilsVqgG6kip6jiAYtimQFaYaOMrl1QY5ho}
replicate.vton-path=/predictions
replicate.idm-version=e7ff770781ace2d82ccc8e1d277c50f90e045b8c6aaaa01ab82f0e9d7ee181fa


replicate.face-match-version=${REPLICATE_FACE_MATCH_VERSION:83e4bb4ade81e81bbaaf8d7b33db30b93688407c2c2d2d1010a0bff378e62a3a}